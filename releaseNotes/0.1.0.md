# Release Notes - Version 0.1.0

## Overview
Initial release of CodeFrame - a multi-language code analyzer that extracts structural and semantic information from source code using Tree-sitter parsers.

## Supported Languages
- **C#** - Full support with nested class handling
- **PHP** - Complete analysis including interfaces and traits
- **Java** - Comprehensive analysis with annotation support
- **Python** - Full support with async/await handling
- **JavaScript** - Class and function analysis
- **TypeScript** - Type-aware analysis

## Features

### Core Analysis Capabilities
- **Type Extraction**: Classes, interfaces, enums, and their relationships
- **Method Analysis**: 
  - Method signatures with parameters and return types
  - Local variable tracking
  - Method call extraction with call counts
  - Support for both traditional and expression-bodied methods (C#)
- **Field/Property Extraction**: Including visibility and modifiers
- **Import/Using Directives**: Complete dependency tracking
- **Annotations/Attributes**: Full support across all languages
- **Visibility & Modifiers**: Accurate extraction of access levels and keywords

### C# Analyzer Enhancements
- ✅ **Nested Class Support**: Correctly identifies and analyzes nested classes at any depth
- ✅ **Expression-Bodied Methods**: Full support for methods using `=>` syntax
- ✅ **Proper Node Type Detection**: Uses `declaration_list` instead of `class_body`
- ✅ **Return Type Extraction**: Uses field-based lookup for accurate type detection
- ✅ **Duplicate Prevention**: Uses byte-position tracking to avoid duplicate class entries

### PHP Analyzer Features
- ✅ **Interface Method Extraction**: Complete analysis of interface declarations
- ✅ **Property Promotion**: Constructor parameter property handling
- ✅ **Return Type Hints**: Full support for nullable and union types
- ✅ **Method Call Tracking**: Both instance (`->`) and static (`::`) calls
- ✅ **Nested Class Support**: Classes within classes and traits

### Output Format
- **JSONL Format**: One JSON object per line for easy streaming and processing
- **Hierarchical Structure**: Types contain their methods and fields
- **Rich Metadata**: Includes visibility, modifiers, annotations, and relationships
- **Method Call Details**: Object type, object name, and call counts

## Technical Details

### Architecture
- **Tree-sitter Integration**: Native parser bindings for accurate AST analysis
- **Parallel Processing**: Multi-threaded file analysis with progress reporting
- **Robust Error Handling**: Graceful handling of parse errors and null nodes
- **Language Detection**: Automatic language identification by file extension

### Performance
- **Parallel File Processing**: Utilizes all available CPU cores
- **Progress Reporting**: Real-time feedback during analysis
- **Efficient Memory Usage**: Streaming output to JSONL format

## Bug Fixes
- Fixed C# nested class duplication issue (TSNode equality problem)
- Fixed C# return type extraction using field names
- Fixed C# expression-bodied method analysis
- Fixed PHP interface method extraction
- Fixed parallel processing progress counter (AtomicInteger)

## Known Limitations
- Constructor chaining not fully tracked in some languages
- Generic type constraints not fully captured
- Some complex LINQ expressions may have incomplete call graphs

## Usage
```bash
java -jar codeframe.jar <input-directory> <output-file>
```

### Docker/Linux Usage

Assuming WORKDIR is `/workspace` and `codeframe.jar` is at `/workspace`:

```bash
# Analyze /workspace/src and write to /workspace/codeframe-out/analysis.jsonl
java -jar /workspace/codeframe.jar /workspace/src /workspace/codeframe-out/analysis.jsonl

# Analyze a mounted repo at /workspace/repo and write to /workspace/results/repo.jsonl
java -jar /workspace/codeframe.jar /workspace/repo /workspace/results/repo.jsonl
```

### CLI Change

- CodeFrame now requires two arguments (input path, output file). Parent directories for the output file are created automatically.

## Output Example
```json
{
  "filePath": "/src/Example.cs",
  "language": "csharp",
  "types": [{
    "kind": "class",
    "name": "MyClass",
    "methods": [{
      "name": "MyMethod",
      "returnType": "void",
      "parameters": [],
      "methodCalls": [...]
    }]
  }]
}
```

## Future Enhancements
- Support for more languages (Go, Rust, Kotlin)
- Enhanced call graph analysis
- Cross-file reference resolution
- Metrics calculation (complexity, coupling, etc.)