{
  "filePath" : "src/test/resources/samples/php/ExceptionHandlingSample.php",
  "language" : "php",
  "types" : [ {
    "kind" : "class",
    "name" : "ApplicationException",
    "visibility" : "public",
    "fields" : [ {
      "name" : "errorCode",
      "type" : "string",
      "visibility" : "protected",
      "modifiers" : [ "protected" ]
    }, {
      "name" : "context",
      "type" : "array",
      "visibility" : "protected",
      "modifiers" : [ "protected" ]
    } ],
    "methods" : [ {
      "name" : "__construct",
      "visibility" : "public",
      "modifiers" : [ "public" ],
      "parameters" : [ {
        "name" : "message",
        "type" : "string"
      }, {
        "name" : "errorCode",
        "type" : "string"
      }, {
        "name" : "context",
        "type" : "array"
      }, {
        "name" : "code",
        "type" : "int"
      }, {
        "name" : "previous",
        "type" : "?\\Throwable"
      } ],
      "methodCalls" : [ {
        "methodName" : "__construct",
        "objectType" : "parent",
        "callCount" : 1,
        "parameterCount" : 3
      } ]
    }, {
      "name" : "getErrorCode",
      "returnType" : "string",
      "visibility" : "public",
      "modifiers" : [ "public" ]
    }, {
      "name" : "getContext",
      "returnType" : "array",
      "visibility" : "public",
      "modifiers" : [ "public" ]
    }, {
      "name" : "toArray",
      "returnType" : "array",
      "visibility" : "public",
      "modifiers" : [ "public" ],
      "methodCalls" : [ {
        "methodName" : "getFile",
        "objectName" : "this",
        "callCount" : 1,
        "parameterCount" : 0
      }, {
        "methodName" : "getLine",
        "objectName" : "this",
        "callCount" : 1,
        "parameterCount" : 0
      }, {
        "methodName" : "getMessage",
        "objectName" : "this",
        "callCount" : 1,
        "parameterCount" : 0
      } ]
    } ]
  }, {
    "kind" : "class",
    "name" : "ValidationException",
    "visibility" : "public",
    "extendsType" : "ApplicationException",
    "fields" : [ {
      "name" : "errors",
      "type" : "array",
      "visibility" : "private",
      "modifiers" : [ "private" ]
    } ],
    "methods" : [ {
      "name" : "__construct",
      "visibility" : "public",
      "modifiers" : [ "public" ],
      "parameters" : [ {
        "name" : "errors",
        "type" : "array"
      }, {
        "name" : "message",
        "type" : "string"
      } ],
      "methodCalls" : [ {
        "methodName" : "__construct",
        "objectType" : "parent",
        "callCount" : 1,
        "parameterCount" : 3
      } ]
    }, {
      "name" : "getErrors",
      "returnType" : "array",
      "visibility" : "public",
      "modifiers" : [ "public" ]
    }, {
      "name" : "hasError",
      "returnType" : "bool",
      "visibility" : "public",
      "modifiers" : [ "public" ],
      "parameters" : [ {
        "name" : "field",
        "type" : "string"
      } ],
      "methodCalls" : [ {
        "methodName" : "isset",
        "callCount" : 1,
        "parameterCount" : 1
      } ]
    }, {
      "name" : "getFieldError",
      "returnType" : "?string",
      "visibility" : "public",
      "modifiers" : [ "public" ],
      "parameters" : [ {
        "name" : "field",
        "type" : "string"
      } ]
    } ]
  }, {
    "kind" : "class",
    "name" : "NotFoundException",
    "visibility" : "public",
    "extendsType" : "ApplicationException",
    "fields" : [ {
      "name" : "resourceType",
      "type" : "string",
      "visibility" : "private",
      "modifiers" : [ "private" ]
    }, {
      "name" : "resourceId",
      "type" : "mixed",
      "visibility" : "private",
      "modifiers" : [ "private" ]
    } ],
    "methods" : [ {
      "name" : "__construct",
      "visibility" : "public",
      "modifiers" : [ "public" ],
      "parameters" : [ {
        "name" : "resourceType",
        "type" : "string"
      }, {
        "name" : "resourceId",
        "type" : "mixed"
      } ],
      "localVariables" : [ "message" ],
      "methodCalls" : [ {
        "methodName" : "__construct",
        "objectType" : "parent",
        "callCount" : 1,
        "parameterCount" : 4
      } ]
    }, {
      "name" : "getResourceType",
      "returnType" : "string",
      "visibility" : "public",
      "modifiers" : [ "public" ]
    }, {
      "name" : "getResourceId",
      "returnType" : "mixed",
      "visibility" : "public",
      "modifiers" : [ "public" ]
    } ]
  }, {
    "kind" : "class",
    "name" : "DatabaseException",
    "visibility" : "public",
    "extendsType" : "ApplicationException",
    "fields" : [ {
      "name" : "query",
      "type" : "?string",
      "visibility" : "private",
      "modifiers" : [ "private" ]
    } ],
    "methods" : [ {
      "name" : "__construct",
      "visibility" : "public",
      "modifiers" : [ "public" ],
      "parameters" : [ {
        "name" : "message",
        "type" : "string"
      }, {
        "name" : "query",
        "type" : "?string"
      }, {
        "name" : "previous",
        "type" : "?\\Throwable"
      } ],
      "methodCalls" : [ {
        "methodName" : "__construct",
        "objectType" : "parent",
        "callCount" : 1,
        "parameterCount" : 5
      } ]
    }, {
      "name" : "getQuery",
      "returnType" : "?string",
      "visibility" : "public",
      "modifiers" : [ "public" ]
    } ]
  }, {
    "kind" : "class",
    "name" : "AuthenticationException",
    "visibility" : "public",
    "extendsType" : "ApplicationException",
    "methods" : [ {
      "name" : "__construct",
      "visibility" : "public",
      "modifiers" : [ "public" ],
      "parameters" : [ {
        "name" : "message",
        "type" : "string"
      } ],
      "methodCalls" : [ {
        "methodName" : "__construct",
        "objectType" : "parent",
        "callCount" : 1,
        "parameterCount" : 4
      } ]
    } ]
  }, {
    "kind" : "class",
    "name" : "AuthorizationException",
    "visibility" : "public",
    "extendsType" : "ApplicationException",
    "fields" : [ {
      "name" : "requiredPermission",
      "type" : "string",
      "visibility" : "private",
      "modifiers" : [ "private" ]
    } ],
    "methods" : [ {
      "name" : "__construct",
      "visibility" : "public",
      "modifiers" : [ "public" ],
      "parameters" : [ {
        "name" : "requiredPermission",
        "type" : "string"
      } ],
      "localVariables" : [ "message" ],
      "methodCalls" : [ {
        "methodName" : "__construct",
        "objectType" : "parent",
        "callCount" : 1,
        "parameterCount" : 4
      } ]
    }, {
      "name" : "getRequiredPermission",
      "returnType" : "string",
      "visibility" : "public",
      "modifiers" : [ "public" ]
    } ]
  }, {
    "kind" : "class",
    "name" : "UserService",
    "visibility" : "public",
    "fields" : [ {
      "name" : "users",
      "type" : "array",
      "visibility" : "private",
      "modifiers" : [ "private" ]
    } ],
    "methods" : [ {
      "name" : "__construct",
      "visibility" : "public",
      "modifiers" : [ "public" ]
    }, {
      "name" : "findById",
      "returnType" : "array",
      "visibility" : "public",
      "modifiers" : [ "public" ],
      "parameters" : [ {
        "name" : "id",
        "type" : "int"
      } ],
      "methodCalls" : [ {
        "methodName" : "isset",
        "callCount" : 1,
        "parameterCount" : 1
      } ]
    }, {
      "name" : "create",
      "returnType" : "array",
      "visibility" : "public",
      "modifiers" : [ "public" ],
      "parameters" : [ {
        "name" : "data",
        "type" : "array"
      } ],
      "localVariables" : [ "errors", "id", "user" ],
      "methodCalls" : [ {
        "methodName" : "array_keys",
        "callCount" : 1,
        "parameterCount" : 1
      }, {
        "methodName" : "empty",
        "callCount" : 1,
        "parameterCount" : 1
      }, {
        "methodName" : "max",
        "callCount" : 1,
        "parameterCount" : 1
      }, {
        "methodName" : "validate",
        "objectName" : "this",
        "callCount" : 1,
        "parameterCount" : 1
      } ]
    }, {
      "name" : "validate",
      "returnType" : "array",
      "visibility" : "private",
      "modifiers" : [ "private" ],
      "parameters" : [ {
        "name" : "data",
        "type" : "array"
      } ],
      "localVariables" : [ "errors" ],
      "methodCalls" : [ {
        "methodName" : "empty",
        "callCount" : 2,
        "parameterCount" : 1
      }, {
        "methodName" : "filter_var",
        "callCount" : 1,
        "parameterCount" : 2
      } ]
    }, {
      "name" : "delete",
      "returnType" : "void",
      "visibility" : "public",
      "modifiers" : [ "public" ],
      "parameters" : [ {
        "name" : "id",
        "type" : "int"
      } ],
      "methodCalls" : [ {
        "methodName" : "isset",
        "callCount" : 1,
        "parameterCount" : 1
      } ]
    } ]
  }, {
    "kind" : "class",
    "name" : "DatabaseConnection",
    "visibility" : "public",
    "fields" : [ {
      "name" : "connected",
      "type" : "bool",
      "visibility" : "private",
      "modifiers" : [ "private" ]
    }, {
      "name" : "inTransaction",
      "type" : "bool",
      "visibility" : "private",
      "modifiers" : [ "private" ]
    } ],
    "methods" : [ {
      "name" : "connect",
      "returnType" : "void",
      "visibility" : "public",
      "modifiers" : [ "public" ]
    }, {
      "name" : "disconnect",
      "returnType" : "void",
      "visibility" : "public",
      "modifiers" : [ "public" ]
    }, {
      "name" : "isConnected",
      "returnType" : "bool",
      "visibility" : "public",
      "modifiers" : [ "public" ]
    }, {
      "name" : "beginTransaction",
      "returnType" : "void",
      "visibility" : "public",
      "modifiers" : [ "public" ]
    }, {
      "name" : "commit",
      "returnType" : "void",
      "visibility" : "public",
      "modifiers" : [ "public" ]
    }, {
      "name" : "rollback",
      "returnType" : "void",
      "visibility" : "public",
      "modifiers" : [ "public" ]
    }, {
      "name" : "query",
      "returnType" : "array",
      "visibility" : "public",
      "modifiers" : [ "public" ],
      "parameters" : [ {
        "name" : "sql",
        "type" : "string"
      } ],
      "methodCalls" : [ {
        "methodName" : "str_contains",
        "callCount" : 1,
        "parameterCount" : 2
      } ]
    } ]
  }, {
    "kind" : "class",
    "name" : "ExceptionHandler",
    "visibility" : "public",
    "fields" : [ {
      "name" : "handlers",
      "type" : "array",
      "visibility" : "private",
      "modifiers" : [ "private" ]
    } ],
    "methods" : [ {
      "name" : "register",
      "returnType" : "void",
      "visibility" : "public",
      "modifiers" : [ "public" ],
      "parameters" : [ {
        "name" : "exceptionClass",
        "type" : "string"
      }, {
        "name" : "handler",
        "type" : "callable"
      } ]
    }, {
      "name" : "handle",
      "returnType" : "mixed",
      "visibility" : "public",
      "modifiers" : [ "public" ],
      "parameters" : [ {
        "name" : "e",
        "type" : "\\Throwable"
      } ],
      "localVariables" : [ "class" ],
      "methodCalls" : [ {
        "methodName" : "defaultHandler",
        "objectName" : "this",
        "callCount" : 1,
        "parameterCount" : 1
      }, {
        "methodName" : "get_class",
        "callCount" : 1,
        "parameterCount" : 1
      }, {
        "methodName" : "isset",
        "callCount" : 1,
        "parameterCount" : 1
      } ]
    }, {
      "name" : "defaultHandler",
      "returnType" : "array",
      "visibility" : "private",
      "modifiers" : [ "private" ],
      "parameters" : [ {
        "name" : "e",
        "type" : "\\Throwable"
      } ],
      "methodCalls" : [ {
        "methodName" : "getCode",
        "objectName" : "e",
        "callCount" : 1,
        "parameterCount" : 0
      }, {
        "methodName" : "getMessage",
        "objectName" : "e",
        "callCount" : 1,
        "parameterCount" : 0
      } ]
    } ]
  }, {
    "kind" : "class",
    "name" : "RetryableOperation",
    "visibility" : "public",
    "fields" : [ {
      "name" : "maxAttempts",
      "type" : "int",
      "visibility" : "private",
      "modifiers" : [ "private" ]
    }, {
      "name" : "delayMs",
      "type" : "int",
      "visibility" : "private",
      "modifiers" : [ "private" ]
    } ],
    "methods" : [ {
      "name" : "__construct",
      "visibility" : "public",
      "modifiers" : [ "public" ],
      "parameters" : [ {
        "name" : "maxAttempts",
        "type" : "int"
      }, {
        "name" : "delayMs",
        "type" : "int"
      } ]
    }, {
      "name" : "execute",
      "returnType" : "mixed",
      "visibility" : "public",
      "modifiers" : [ "public" ],
      "parameters" : [ {
        "name" : "operation",
        "type" : "callable"
      } ],
      "localVariables" : [ "lastException", "attempt" ],
      "methodCalls" : [ {
        "methodName" : "usleep",
        "callCount" : 1,
        "parameterCount" : 1
      } ]
    } ]
  }, {
    "kind" : "class",
    "name" : "OrderProcessor",
    "visibility" : "public",
    "fields" : [ {
      "name" : "userService",
      "type" : "UserService",
      "visibility" : "private",
      "modifiers" : [ "private" ]
    }, {
      "name" : "db",
      "type" : "DatabaseConnection",
      "visibility" : "private",
      "modifiers" : [ "private" ]
    } ],
    "methods" : [ {
      "name" : "__construct",
      "visibility" : "public",
      "modifiers" : [ "public" ],
      "parameters" : [ {
        "name" : "userService",
        "type" : "UserService"
      }, {
        "name" : "db",
        "type" : "DatabaseConnection"
      } ]
    }, {
      "name" : "processOrder",
      "returnType" : "array",
      "visibility" : "public",
      "modifiers" : [ "public" ],
      "parameters" : [ {
        "name" : "userId",
        "type" : "int"
      }, {
        "name" : "items",
        "type" : "array"
      } ],
      "localVariables" : [ "user", "order" ],
      "methodCalls" : [ {
        "methodName" : "beginTransaction",
        "objectName" : "db",
        "callCount" : 1,
        "parameterCount" : 0
      }, {
        "methodName" : "commit",
        "objectName" : "db",
        "callCount" : 1,
        "parameterCount" : 0
      }, {
        "methodName" : "connect",
        "objectName" : "db",
        "callCount" : 1,
        "parameterCount" : 0
      }, {
        "methodName" : "createOrder",
        "objectName" : "this",
        "callCount" : 1,
        "parameterCount" : 2
      }, {
        "methodName" : "disconnect",
        "objectName" : "db",
        "callCount" : 1,
        "parameterCount" : 0
      }, {
        "methodName" : "findById",
        "objectName" : "userService",
        "callCount" : 1,
        "parameterCount" : 1
      }, {
        "methodName" : "rollback",
        "objectName" : "db",
        "callCount" : 1,
        "parameterCount" : 0
      } ]
    }, {
      "name" : "createOrder",
      "returnType" : "array",
      "visibility" : "private",
      "modifiers" : [ "private" ],
      "parameters" : [ {
        "name" : "user",
        "type" : "array"
      }, {
        "name" : "items",
        "type" : "array"
      } ],
      "methodCalls" : [ {
        "methodName" : "rand",
        "callCount" : 1,
        "parameterCount" : 2
      } ]
    }, {
      "name" : "processWithMultipleCatch",
      "returnType" : "array",
      "visibility" : "public",
      "modifiers" : [ "public" ],
      "parameters" : [ {
        "name" : "userId",
        "type" : "int"
      } ],
      "localVariables" : [ "user", "result" ],
      "methodCalls" : [ {
        "methodName" : "findById",
        "objectName" : "userService",
        "callCount" : 1,
        "parameterCount" : 1
      }, {
        "methodName" : "getCode",
        "objectName" : "e",
        "callCount" : 1,
        "parameterCount" : 0
      }, {
        "methodName" : "getMessage",
        "objectName" : "e",
        "callCount" : 1,
        "parameterCount" : 0
      }, {
        "methodName" : "getQuery",
        "objectName" : "e",
        "callCount" : 1,
        "parameterCount" : 0
      }, {
        "methodName" : "query",
        "objectName" : "db",
        "callCount" : 1,
        "parameterCount" : 1
      } ]
    }, {
      "name" : "processWithRethrow",
      "returnType" : "array",
      "visibility" : "public",
      "modifiers" : [ "public" ],
      "parameters" : [ {
        "name" : "userId",
        "type" : "int"
      } ],
      "methodCalls" : [ {
        "methodName" : "error_log",
        "callCount" : 1,
        "parameterCount" : 1
      }, {
        "methodName" : "getMessage",
        "objectName" : "e",
        "callCount" : 1,
        "parameterCount" : 0
      }, {
        "methodName" : "processWithMultipleCatch",
        "objectName" : "this",
        "callCount" : 1,
        "parameterCount" : 1
      } ]
    }, {
      "name" : "processWithExceptionChaining",
      "returnType" : "array",
      "visibility" : "public",
      "modifiers" : [ "public" ],
      "parameters" : [ {
        "name" : "userId",
        "type" : "int"
      } ],
      "methodCalls" : [ {
        "methodName" : "connect",
        "objectName" : "db",
        "callCount" : 1,
        "parameterCount" : 0
      }, {
        "methodName" : "query",
        "objectName" : "db",
        "callCount" : 1,
        "parameterCount" : 1
      } ]
    } ]
  } ],
  "methods" : [ {
    "name" : "safeExecute",
    "returnType" : "mixed",
    "parameters" : [ {
      "name" : "fn",
      "type" : "callable"
    } ],
    "methodCalls" : [ {
      "methodName" : "error_log",
      "callCount" : 1,
      "parameterCount" : 1
    }, {
      "methodName" : "getMessage",
      "objectName" : "e",
      "callCount" : 1,
      "parameterCount" : 0
    } ]
  }, {
    "name" : "validateOrThrow",
    "returnType" : "void",
    "parameters" : [ {
      "name" : "data",
      "type" : "array"
    }, {
      "name" : "rules",
      "type" : "array"
    } ],
    "localVariables" : [ "errors" ],
    "methodCalls" : [ {
      "methodName" : "empty",
      "callCount" : 2,
      "parameterCount" : 1
    } ]
  } ],
  "fields" : [ {
    "name" : "MAX_RETRY_ATTEMPTS",
    "type" : "int",
    "modifiers" : [ "const" ]
  } ],
  "methodCalls" : [ {
    "methodName" : "error_log",
    "callCount" : 1,
    "parameterCount" : 1
  }, {
    "methodName" : "getMessage",
    "objectName" : "e",
    "callCount" : 1,
    "parameterCount" : 0
  }, {
    "methodName" : "set_exception_handler",
    "callCount" : 1,
    "parameterCount" : 1
  } ],
  "imports" : [ "namespace App\\Exceptions;" ]
}